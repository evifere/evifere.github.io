(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cocoricover"],{"2ff6":function(e,t,o){"use strict";var l=o("b845"),n=o.n(l);n.a},"3bed":function(e){e.exports=JSON.parse('["logo","cougar","lapin","chien","oies","lion","monstre","baleine","chats","canard","chasseur","beerbarrel","pie","trollface","paresseux","cheval","chameau","football","escargot","limace","airplane","coffre-fort","vache","autruche"]')},b845:function(e,t,o){},d85f:function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{style:e.mainorientation},[o("el-aside",{directives:[{name:"show",rawName:"v-show",value:!e.isEditable,expression:"!isEditable"}],attrs:{width:"508px"}},[o("img",{ref:"preview",attrs:{width:"500",height:"700",src:""}})]),o("el-aside",{directives:[{name:"show",rawName:"v-show",value:e.isEditable,expression:"isEditable"}],attrs:{width:e._f("mq")(e.$mq,{sm:"425px",md:"525px",lg:"525px"})}},[o("emoji-picker",{directives:[{name:"show",rawName:"v-show",value:e.isTextSelected,expression:"isTextSelected"}],attrs:{search:e.search},on:{emoji:e.insertEmoji},scopedSlots:e._u([{key:"emoji-invoker",fn:function(e){var t=e.events.click;return o("div",{staticClass:"emoji-invoker",on:{click:function(e){return e.stopPropagation(),t(e)}}},[o("svg",{attrs:{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"}},[o("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),o("path",{attrs:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"}})])])}},{key:"emoji-picker",fn:function(t){var l=t.emojis;t.insert,t.display;return o("div",{staticClass:"emoji-picker"},[o("div",[o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"text"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}})]),o("div",e._l(l,(function(t,l){return o("div",{key:l},[o("h5",[e._v(e._s(l))]),o("div",e._l(t,(function(t,l){return o("span",{key:l,attrs:{title:l},on:{click:function(o){return e.insertEmoji(t)}}},[e._v(e._s(t))])})),0)])})),0)])])}}])}),o("canvas",{attrs:{id:"background",tabindex:"0"}})],1),o("el-container",{staticStyle:{"min-width":"500px"}},[o("el-header",[e._v("\n      Cocoricorly générateur de couverture parodique !\n      "),o("el-button",{on:{click:function(t){return e.$router.push("cocoricoQot")}}},[e._v("Citation")])],1),o("el-main",[o("hr"),o("el-col",{staticClass:"params-panel"},[o("el-row",[o("el-col",{staticClass:"col-label col-text-center",attrs:{span:e._f("mq")(e.$mq,{sm:12,md:4,lg:4})}},[o("label",[e._v("Mais que fais la police !")])]),o("el-col",{attrs:{span:e._f("mq")(e.$mq,{sm:12,md:4,lg:4})}},[o("el-select",{attrs:{placeholder:"Mais que fais la police ?",disabled:!e.isTextSelected||!e.isEditable},model:{value:e.currentTextObjectConfig.fontFamily,callback:function(t){e.$set(e.currentTextObjectConfig,"fontFamily",t)},expression:"currentTextObjectConfig.fontFamily"}},e._l(e.allFonts,(function(t){return o("el-option",{key:t,attrs:{label:t,value:t}},[o("span",{style:"font-family:"+t},[e._v(e._s(t))])])})),1)],1),o("el-col",{staticClass:"col-label col-text-center",attrs:{span:e._f("mq")(e.$mq,{sm:12,md:4,lg:4})}},[o("label",[e._v("Gérer les kilos en trop")])]),o("el-col",{attrs:{span:e._f("mq")(e.$mq,{sm:12,md:4,lg:4})}},[o("el-select",{attrs:{placeholder:"font weight",disabled:!e.isTextSelected||!e.isEditable},model:{value:e.currentTextObjectConfig.fontWeight,callback:function(t){e.$set(e.currentTextObjectConfig,"fontWeight",t)},expression:"currentTextObjectConfig.fontWeight"}},e._l(e.fontWeights,(function(e){return o("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),o("el-col",{staticClass:"col-label col-text-center",attrs:{span:e._f("mq")(e.$mq,{sm:12,md:4,lg:4})}},[o("label",[e._v("Avoir du style")])]),o("el-col",{attrs:{span:e._f("mq")(e.$mq,{sm:12,md:4,lg:4})}},[o("el-select",{attrs:{placeholder:"font weight",disabled:!e.isTextSelected||!e.isEditable},model:{value:e.currentTextObjectConfig.fontStyle,callback:function(t){e.$set(e.currentTextObjectConfig,"fontStyle",t)},expression:"currentTextObjectConfig.fontStyle"}},e._l(e.fontStyles,(function(e){return o("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:e._f("mq")(e.$mq,{sm:24,md:10,lg:10})}},[o("el-checkbox",{model:{value:e.currentTextObjectConfig.underline,callback:function(t){e.$set(e.currentTextObjectConfig,"underline",t)},expression:"currentTextObjectConfig.underline"}},[e._v("Underline")]),o("el-checkbox",{model:{value:e.currentTextObjectConfig.linethrough,callback:function(t){e.$set(e.currentTextObjectConfig,"linethrough",t)},expression:"currentTextObjectConfig.linethrough"}},[e._v("Line through")]),o("el-checkbox",{model:{value:e.currentTextObjectConfig.overline,callback:function(t){e.$set(e.currentTextObjectConfig,"overline",t)},expression:"currentTextObjectConfig.overline"}},[e._v("Overline")])],1)],1),o("el-row",{staticClass:"empty"}),o("el-row",[o("el-col",{staticClass:"col-label col-text-left",attrs:{span:e._f("mq")(e.$mq,{sm:12,md:6,lg:6})}},[o("label",[e._v("Un logo logo dans la case avec ma frame !")])]),o("el-col",{attrs:{span:e._f("mq")(e.$mq,{sm:12,md:6,lg:6})}},[o("el-select",{attrs:{placeholder:"Ton logo c'est ici !",disabled:!e.isEditable},model:{value:e.logo,callback:function(t){e.logo=t},expression:"logo"}},e._l(e.logos,(function(t){return o("el-option",{key:t,attrs:{label:t,value:t}},[o("el-row",[o("el-col",{attrs:{span:8}},[o("img",{attrs:{src:"animals/"+t+".png",width:"24",height:"24"}})]),o("el-col",{attrs:{span:8}},[o("span",[e._v(e._s(t))])])],1)],1)})),1)],1),o("el-col",{attrs:{span:e._f("mq")(e.$mq,{sm:24,md:12,lg:12})}},[o("el-input",{attrs:{placeholder:"https://openclipart.org/image/300px/svg_to_png/304284/1531920272.png"},model:{value:e.externalLogo,callback:function(t){e.externalLogo=t},expression:"externalLogo"}},[o("template",{slot:"prepend"},[e._v("Logo perso")])],2)],1)],1),o("el-row",[o("el-col",{attrs:{span:18}},[o("el-input",{attrs:{placeholder:"https://openclipart.org/image/300px/svg_to_png/304284/1531920272.png"},model:{value:e.newImageUrl,callback:function(t){e.newImageUrl=t},expression:"newImageUrl"}},[o("template",{slot:"prepend"},[e._v("Ajouter une image")])],2)],1),o("el-button",{attrs:{icon:"el-icon-circle-plus",type:"success",disabled:!e.isEditable,circle:"",size:"small"},on:{click:e.addImage}})],1),o("el-row",[o("el-col",{staticClass:"col-label col-text-left",attrs:{span:e._f("mq")(e.$mq,{sm:20,md:4,lg:4})}},[e._v("Ajouter block texte :")]),o("el-col",{attrs:{span:e._f("mq")(e.$mq,{sm:4,md:1,lg:1})}},[o("el-button",{attrs:{icon:"el-icon-circle-plus",type:"success",disabled:!e.isEditable,circle:"",size:"small"},on:{click:e.addTextBlock}})],1)],1),o("el-row",[o("el-col",{staticClass:"col-label col-text-left",attrs:{span:8}},[o("label",[e._v("L'égoût et les couleurs !")])]),o("el-col",{attrs:{span:16}},[o("el-select",{attrs:{placeholder:"L'égoût et les couleurs !",disabled:!e.isEditable},model:{value:e.mainColor,callback:function(t){e.mainColor=t},expression:"mainColor"}},e._l(e.mainColors,(function(t){return o("el-option",{key:t,attrs:{label:t,value:t}},[o("el-row",[o("el-col",{attrs:{span:16}},[o("span",[e._v(e._s(t))])]),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"color-box",style:"background:"+t+";"})])],1)],1)})),1)],1)],1),o("el-row",[o("el-col",{staticClass:"col-label col-text-left",attrs:{span:8}},[o("label",[e._v("La couleur de la plume est plus forte que le pêt.")])]),o("el-col",{attrs:{span:16}},[o("el-select",{attrs:{placeholder:"La couleur du texte",disabled:!e.isTextSelected||!e.isEditable},model:{value:e.currentTextObjectConfig.fill,callback:function(t){e.$set(e.currentTextObjectConfig,"fill",t)},expression:"currentTextObjectConfig.fill"}},e._l(e.mainColors,(function(t){return o("el-option",{key:t,attrs:{label:t,value:t}},[o("el-row",[o("el-col",{attrs:{span:16}},[o("span",[e._v(e._s(t))])]),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"color-box",style:"background:"+t+";"})])],1)],1)})),1)],1)],1),o("el-row",[o("el-col",{staticClass:"col-label col-text-left",attrs:{span:8}},[o("label",[e._v("Text align")])]),o("el-col",{attrs:{span:16}},[o("el-select",{attrs:{placeholder:"Alignement",disabled:!e.isTextSelected||!e.isEditable},model:{value:e.currentTextObjectConfig.textAlign,callback:function(t){e.$set(e.currentTextObjectConfig,"textAlign",t)},expression:"currentTextObjectConfig.textAlign"}},e._l(e.alignments,(function(e){return o("el-option",{key:e,attrs:{label:e,value:e.toLowerCase()}})})),1)],1)],1),o("el-row",{staticClass:"empty"}),o("el-row",[o("el-col",{staticClass:"col-label col-text-left",attrs:{span:4}},[o("label",[e._v("Thunder Stroke")])]),o("el-col",{attrs:{span:4}},[o("el-color-picker",{attrs:{size:"mini","color-format":"hex"},model:{value:e.currentTextObjectConfig.stroke,callback:function(t){e.$set(e.currentTextObjectConfig,"stroke",t)},expression:"currentTextObjectConfig.stroke"}})],1),o("el-col",{attrs:{span:16}},[o("el-slider",{attrs:{min:0,max:10,step:.1,"show-input":"",disabled:!e.isTextSelected||!e.isEditable},model:{value:e.currentTextObjectConfig.strokeWidth,callback:function(t){e.$set(e.currentTextObjectConfig,"strokeWidth",t)},expression:"currentTextObjectConfig.strokeWidth"}})],1)],1),o("el-row",[o("el-col",{staticClass:"col-label col-text-left",attrs:{span:8}},[o("label",[e._v("Font size")])]),o("el-col",{attrs:{span:16}},[o("el-slider",{attrs:{min:1,max:120,step:1,"show-input":"",disabled:!e.isTextSelected||!e.isEditable},model:{value:e.currentTextObjectConfig.fontSize,callback:function(t){e.$set(e.currentTextObjectConfig,"fontSize",t)},expression:"currentTextObjectConfig.fontSize"}})],1)],1),o("el-row",[o("el-col",{staticClass:"col-label col-text-left",attrs:{span:8}},[o("label",[e._v("Line height")])]),o("el-col",{attrs:{span:16}},[o("el-slider",{attrs:{min:0,max:10,step:.1,"show-input":"",disabled:!e.isTextSelected||!e.isEditable},model:{value:e.currentTextObjectConfig.lineHeight,callback:function(t){e.$set(e.currentTextObjectConfig,"lineHeight",t)},expression:"currentTextObjectConfig.lineHeight"}})],1)],1),o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:8}},[o("el-button",{attrs:{type:"primary",disabled:!e.isEditable},on:{click:e.moveForward}},[e._v("Si tu avances")])],1),o("el-col",{staticClass:"col-label col-text-center",attrs:{span:4}},[e._v("et")]),o("el-col",{attrs:{span:8}},[o("el-button",{attrs:{type:"primary",disabled:!e.isEditable},on:{click:e.moveBackward}},[e._v("tu recules !")])],1)],1),o("el-row",[o("el-switch",{attrs:{"active-text":"Edition en cours","inactive-text":"Mode Preview"},on:{change:e.saveToPng},model:{value:e.isEditable,callback:function(t){e.isEditable=t},expression:"isEditable"}})],1),o("hr"),o("el-row",[o("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"downloadPng",attrs:{href:"#",download:"cocoricover.png"}}),o("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.downloadPng}},[e._v("Png")])],1)],1)],1),o("el-footer",{attrs:{align:"right"}},[e._v("copyright 2018-2019 @cocoricorly v"+e._s(e.version))])],1)],1)},n=[],i=(o("6762"),o("2fdb"),o("456d"),o("ac6a"),o("7a94")),a=o("9224"),s=o("669f"),r=o.n(s),c=o("0342"),d={name:"CocoricoEditor",components:{EmojiPicker:r.a},props:{msg:String},data:function(){return{input:"",search:"",currentTextObjectConfig:{fontFamily:"Times New Roman",fontWeight:"normal",fontStyle:"normal",fontSize:5,underline:!1,linethrough:!1,overline:!1,lineHeight:1.16,textAlign:"left",fill:"white",strokeWidth:1,stroke:"#ffffff"},isTextSelected:!0,topText:"Taupe texte izi year !",newText:"New kid on the text !",guideText:"Le guide expéditif.",guideTextBottom:"100 % pas remboursé !",titleText:"Le Ch'titre qui l'es bien là",authorsText:"Danny Boom & @cocoricorly",logo:"logo",externalLogo:"",newImageUrl:"",mainColor:"darkmagenta",logos:o("3bed"),mainColors:o("74d6"),fonts:o("3148"),gofonts:o("e226"),alignments:["Left","Center","Justify","Right"],isEditable:!0,fontStyles:["","normal","italic","oblique"],fontWeights:["bold","normal",400,600,800],version:a["a"]}},mounted:function(){this.$canvas=new i["fabric"].Canvas("background",{width:500,height:700,backgroundColor:"white"}),this.$canvas.upperCanvasEl.setAttribute("tabindex","1"),this.$canvas.upperCanvasEl.addEventListener("keydown",this.onKeyDown),this.$headline=this.makeLine([5,0,495,0],this.mainColor),this.$canvas.add(this.$headline);var e=new i["fabric"].Textbox(this.topText,{left:50,top:10,width:400,fontSize:20,fontStyle:"italic",borderColor:"green",textAlign:"center"});this.$canvas.add(e).setActiveObject(e),this.currentTextObjectConfig=e.toObject();var t=this,o="http://evifere.lescigales.org/cocoricover/animals/";"evifere.github.io"===window.location.hostname&&(o="https://evifere.github.io/cocoricover/animals/"),i["fabric"].Image.fromURL(o+this.logo+".png",(function(e){e.set("left",125).set("top",100),t.$canvas.add(e),t.$coverImg=e}));var l=new i["fabric"].Textbox(this.guideText,{left:10,top:385,width:490,fontSize:20,fontStyle:"normal",borderColor:"green",textAlign:"left"});this.$canvas.add(l);var n=new i["fabric"].Textbox(this.guideTextBottom,{left:10,top:560,width:480,fontSize:20,fontStyle:"bold",borderColor:"green",textAlign:"right",linethrough:!0});this.$canvas.add(n),this.$titleTextbox=new i["fabric"].Textbox(this.titleText,{left:10,top:410,width:480,height:2e3,textBackgroundColor:this.mainColor,borderColor:"green",selectionBackgroundColor:"yellow",backgroundColor:this.mainColor,stroke:this.mainColor,fill:"white",fontSize:60,fontStyle:"normal"}),this.$canvas.add(this.$titleTextbox);var a=new i["fabric"].Textbox(this.authorsText,{left:200,top:670,width:300,borderColor:"green",selectionBackgroundColor:"yellow",fontSize:20,fontStyle:"italic"});this.$canvas.add(a);var s=new i["fabric"].Text("?",{left:70,top:670,fontSize:15,fontWeight:"bold"});this.$canvas.add(s).add(s);var r=new i["fabric"].Text("CocoricoRLY",{left:10,top:680,fontSize:10,fontWeight:"bold"});this.$canvas.add(r).add(r),this.registerTextWatcher(),this.$canvas.on("selection:cleared",this.onObjectSelected),this.$canvas.on("selection:created",this.onObjectSelected),this.$canvas.on("selection:updated",this.onObjectSelected),this.saveToPng()},methods:{registerTextWatcher:function(){var e=this;Object.keys(this.currentTextObjectConfig).filter((function(e){return"fontFamily"!==e})).forEach((function(t){return e.$watch("currentTextObjectConfig."+t,(function(o){return e.setActiveProp(t,o)}))}))},onObjectSelected:function(e){var t=this.$canvas.findTarget(e);this.isTextSelected=!1,void 0!==t&&(this.isTextSelected=!("image"===t.type),this.currentTextObjectConfig=t.toObject())},onKeyDown:function(e){"Backspace"!==e.code&&"Delete"!==e.code||this.deleteActiveObject()},deleteActiveObject:function(){var e=this.$canvas.getActiveObject();e&&this.$canvas.remove(e)},setActiveProp:function(e,t){var o=this.$canvas.getActiveObject();o&&(o.set(e,t).setCoords(),this.update(),this.$canvas.renderAll())},update:function(){this.$canvas&&(this.$canvas.fire("canvas:modified"),this.$canvas.requestRenderAll())},loadAndUse:function(e){var t=new c(e),o=this;t.load().then((function(){o.setActiveProp("fontFamily",e)})).catch((function(t){console.error(t),alert("font loading failed "+e)}))},saveToPng:function(){this.$refs.preview.src=this.$canvas.toDataURL("image/png")},downloadPng:function(){this.$refs.downloadPng.href=this.$canvas.toDataURL("image/png"),this.$refs.downloadPng.click()},makeLine:function(e,t){return new i["fabric"].Line(e,{fill:t,stroke:t,strokeWidth:5,selectable:!1,originX:"left",originY:"top"})},moveForward:function(){var e=this.$canvas.getActiveObject();e&&(e.bringForward(!0),this.$canvas.requestRenderAll())},moveBackward:function(){var e=this.$canvas.getActiveObject();e&&(e.sendBackwards(!0),this.$canvas.requestRenderAll())},addImage:function(){var e=this;i["fabric"].Image.fromURL(this.newImageUrl,(function(t){t.set("left",125).set("top",100),e.$canvas.add(t)}),{crossOrigin:"Anonymous"})},insertEmoji:function(e){var t=this.$canvas.getActiveObject(),o=t.selectionStart>0?t.selectionStart:t._text.length;t.insertChars(e,null,o),this.$canvas.requestRenderAll()},addTextBlock:function(){var e=new i["fabric"].Textbox(this.newText,{left:50,top:400,width:400,fontSize:30,fontStyle:"italic",borderColor:"green",textAlign:"center"});this.$canvas.add(e).setActiveObject(e)}},computed:{allFonts:function(){return this.fonts.concat(this.gofonts)},mainorientation:function(){return"sm"===this.$mq?{display:"flex","flex-direction":"column"}:null}},watch:{"currentTextObjectConfig.fontFamily":function(){this.gofonts.includes(this.currentTextObjectConfig.fontFamily)?this.loadAndUse(this.currentTextObjectConfig.fontFamily):this.setActiveProp("fontFamily",this.currentTextObjectConfig.fontFamily)},logo:function(){var e=this,t="http://evifere.lescigales.org/cocoricover/animals/";"evifere.github.io"===window.location.hostname&&(t="https://evifere.github.io/cocoricover/animals/"),this.$coverImg.setSrc(t+this.logo+".png",(function(t){t.set("left",125).set("top",100),e.$canvas.add(t),e.$coverImg=t}))},externalLogo:function(){var e=this;this.$coverImg.setSrc(this.externalLogo,(function(t){t.set("left",125).set("top",100),e.$canvas.add(t),e.$coverImg=t}),{crossOrigin:"Anonymous"})},mainColor:function(){this.$headline.set({fill:this.mainColor,stroke:this.mainColor}),this.$titleTextbox.set({textBackgroundColor:this.mainColor,backgroundColor:this.mainColor,stroke:this.mainColor}),this.$canvas.requestRenderAll()}}},u=d,f=(o("2ff6"),o("2877")),h=Object(f["a"])(u,l,n,!1,null,"e4353050",null);t["default"]=h.exports}}]);
//# sourceMappingURL=cocoricover.ad0f872d.js.map